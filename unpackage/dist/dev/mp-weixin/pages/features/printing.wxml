<view class="printing-page"><view class="status-card"><view class="status-header"><text class="location-name">图书馆一楼打印区</text><view class="distance-info"><uni-icons vue-id="6bdc6bc8-1" type="location" size="14" color="#666" bind:__l="__l"></uni-icons><text>30m</text></view></view><view class="status-grid"><view class="status-item"><text class="status-number available">8</text><text class="status-label">空闲打印机</text></view><view class="status-item"><text class="status-number busy">2</text><text class="status-label">使用中</text></view><view class="status-item"><text class="status-number">2</text><text class="status-label">分钟等待</text></view><view class="status-item"><text class="status-number">￥0.2</text><text class="status-label">每张</text></view></view></view><view class="quick-print"><view class="section-header"><text class="section-title">快速打印</text><text data-event-opts="{{[['tap',[['viewHistory',['$event']]]]]}}" class="upload-history" bindtap="__e">上传历史</text></view><view data-event-opts="{{[['tap',[['uploadFile',['$event']]]]]}}" class="upload-area" bindtap="__e"><image class="upload-icon" src="/static/images/upload.png" mode="aspectFit"></image><text class="upload-text">点击上传文件或将文件拖拽至此处</text><text class="upload-desc">支持 PDF、Word、PPT、Excel 等格式</text></view></view><view class="printers-section"><view class="section-header"><text class="section-title">打印机列表</text><view class="filter-options"><text data-event-opts="{{[['tap',[['setFilter',['all']]]]]}}" class="{{['filter-option',currentFilter==='all'?'active':'']}}" bindtap="__e">全部</text><text data-event-opts="{{[['tap',[['setFilter',['available']]]]]}}" class="{{['filter-option',currentFilter==='available'?'active':'']}}" bindtap="__e">空闲</text><text data-event-opts="{{[['tap',[['setFilter',['color']]]]]}}" class="{{['filter-option',currentFilter==='color'?'active':'']}}" bindtap="__e">彩色</text></view></view><view class="printers-list"><block wx:for="{{filteredPrinters}}" wx:for-item="printer" wx:for-index="index" wx:key="index"><view class="printer-item"><view class="printer-header"><view class="printer-basic"><image class="printer-icon" src="{{printer.image}}" mode="aspectFit"></image><view class="printer-info"><text class="printer-name">{{printer.name}}</text><text class="printer-type">{{printer.type}}</text></view></view><text class="{{['printer-status',printer.statusClass]}}">{{printer.status}}</text></view><view class="printer-body"><view class="printer-details"><view class="detail-item"><uni-icons vue-id="{{'6bdc6bc8-2-'+index}}" type="location" size="14" color="#666" bind:__l="__l"></uni-icons><text>{{printer.location}}</text></view><view class="detail-item"><uni-icons vue-id="{{'6bdc6bc8-3-'+index}}" type="paperplane" size="14" color="#666" bind:__l="__l"></uni-icons><text>{{printer.speed+"页/分钟"}}</text></view><view class="detail-item"><uni-icons vue-id="{{'6bdc6bc8-4-'+index}}" type="medal" size="14" color="#666" bind:__l="__l"></uni-icons><text>{{printer.rating+"分"}}</text></view></view><view class="printer-price"><text class="price-amount">{{"￥"+printer.price}}</text><text class="price-unit">/张</text></view></view><view class="printer-features"><block wx:for="{{printer.features}}" wx:for-item="feature" wx:for-index="fIndex" wx:key="fIndex"><text class="feature-tag">{{feature}}</text></block></view></view></block></view></view><block wx:if="{{showPrintPopup}}"><view class="print-popup"><view data-event-opts="{{[['tap',[['cancelPrint',['$event']]]]]}}" class="popup-mask" bindtap="__e"></view><view class="popup-content"><view class="popup-header"><text class="popup-title">打印设置</text><view data-event-opts="{{[['tap',[['cancelPrint',['$event']]]]]}}" class="popup-close" bindtap="__e"><uni-icons vue-id="6bdc6bc8-5" type="closeempty" size="20" color="#999" bind:__l="__l"></uni-icons></view></view><view class="popup-body"><view class="file-info"><image class="file-icon" src="/static/images/file-icon.png" mode="aspectFit"></image><view class="file-details"><text class="file-name">{{currentFile.name}}</text><text class="file-size">{{currentFile.size}}</text></view></view><view class="print-settings"><view class="setting-row"><text class="setting-label">打印份数</text><view class="copies-control"><button data-event-opts="{{[['tap',[['decreaseCopies',['$event']]]]]}}" class="control-btn" bindtap="__e">-</button><input class="copies-input" type="number" data-event-opts="{{[['input',[['__set_model',['','copies','$event',[]]]]]]}}" value="{{copies}}" bindinput="__e"/><button data-event-opts="{{[['tap',[['increaseCopies',['$event']]]]]}}" class="control-btn" bindtap="__e">+</button></view></view><view class="setting-row"><text class="setting-label">打印颜色</text><view class="color-options"><block wx:for="{{colorOptions}}" wx:for-item="option" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['selectColor',['$0'],[[['colorOptions','',index,'id']]]]]]]}}" class="{{['color-option',selectedColor===option.id?'active':'']}}" bindtap="__e">{{''+option.name+''}}</text></block></view></view><view class="setting-row"><text class="setting-label">双面打印</text><switch checked="{{doubleSided}}" color="#007AFF" data-event-opts="{{[['change',[['toggleDoubleSided',['$event']]]]]}}" bindchange="__e"></switch></view><view class="setting-row"><text class="setting-label">页面范围</text><input class="page-input" type="text" placeholder="如: 1-5,8,11-13" data-event-opts="{{[['input',[['__set_model',['','pageRange','$event',[]]]]]]}}" value="{{pageRange}}" bindinput="__e"/></view><view class="setting-row"><text class="setting-label">打印机选择</text><view class="printer-selection"><text>{{"推荐打印机："+recommendedPrinter.name}}</text><text data-event-opts="{{[['tap',[['showPrinterList',['$event']]]]]}}" class="change-printer" bindtap="__e">更换</text></view></view></view><view class="price-summary"><view class="price-row"><text>单价</text><text>{{"￥"+unitPrice+"/张"}}</text></view><view class="price-row"><text>份数</text><text>{{copies+"份"}}</text></view><view class="price-row"><text>页数</text><text>{{pageCount+"页"}}</text></view><view class="price-row total"><text>预计总价</text><text class="total-price">{{"￥"+$root.m0}}</text></view></view></view><view class="popup-footer"><button data-event-opts="{{[['tap',[['cancelPrint',['$event']]]]]}}" class="cancel-btn" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['confirmPrint',['$event']]]]]}}" class="confirm-btn" bindtap="__e">确认打印</button></view></view></view></block></view>
<view class="schedule-page"><view class="date-selector"><view data-event-opts="{{[['tap',[['changeDate',[-1]]]]]}}" class="date-arrow" bindtap="__e"><image src="/static/images/arrow-left.png" mode="aspectFit"></image></view><view data-event-opts="{{[['tap',[['showDatePicker',['$event']]]]]}}" class="date-display" bindtap="__e"><text class="date-text">{{currentDateDisplay}}</text><text class="date-label">{{currentWeekday}}</text></view><view data-event-opts="{{[['tap',[['changeDate',[1]]]]]}}" class="date-arrow" bindtap="__e"><image src="/static/images/arrow-right.png" mode="aspectFit"></image></view></view><scroll-view class="schedule-container" scroll-y="true"><view class="timeline-container"><view class="timeline-scale"><block wx:for="{{timeSlots}}" wx:for-item="slot" wx:for-index="__i0__" wx:key="id"><view class="time-slot"><text class="time-text">{{slot.time}}</text><view class="time-line"></view></view></block></view><view class="course-container"><block wx:for="{{$root.l0}}" wx:for-item="course" wx:for-index="__i1__" wx:key="id"><view data-event-opts="{{[['tap',[['showCourseDetail',['$0'],[[['courses','id',course.$orig.id]]]]]]]}}" class="course-card" style="{{'top:'+(course.m0+'rpx')+';'+('height:'+(course.m1+'rpx')+';')+('background-color:'+(course.$orig.color)+';')}}" bindtap="__e"><view class="course-content"><text class="course-name">{{course.$orig.name}}</text><text class="course-location">{{course.$orig.location}}</text><text class="course-time">{{course.$orig.startTime+" - "+course.$orig.endTime}}</text></view></view></block></view></view></scroll-view><block wx:if="{{showDetail}}"><view class="course-detail-popup"><view data-event-opts="{{[['tap',[['hideDetail',['$event']]]]]}}" class="popup-mask" bindtap="__e"></view><view class="popup-content"><view class="popup-header" style="{{'background-color:'+(currentCourse.color)+';'}}"><text class="popup-title">{{currentCourse.name}}</text><view data-event-opts="{{[['tap',[['hideDetail',['$event']]]]]}}" class="popup-close" bindtap="__e"><image src="/static/images/close.png" mode="aspectFit"></image></view></view><view class="popup-body"><view class="detail-item"><view class="detail-icon"><image src="/static/images/time.png" mode="aspectFit"></image></view><view class="detail-info"><text class="detail-label">上课时间</text><text class="detail-value">{{currentCourse.startTime+" - "+currentCourse.endTime}}</text></view></view><view class="detail-item"><view class="detail-icon"><image src="/static/images/location.png" mode="aspectFit"></image></view><view class="detail-info"><text class="detail-label">上课地点</text><text class="detail-value">{{currentCourse.location}}</text></view></view><view class="detail-item"><view class="detail-icon"><image src="/static/images/teacher.png" mode="aspectFit"></image></view><view class="detail-info"><text class="detail-label">任课教师</text><text class="detail-value">{{currentCourse.teacher}}</text></view></view><view class="detail-item"><view class="detail-icon"><image src="/static/images/book.png" mode="aspectFit"></image></view><view class="detail-info"><text class="detail-label">课程教材</text><text class="detail-value">{{currentCourse.textbook}}</text></view></view><view class="action-buttons"><button data-event-opts="{{[['tap',[['navigateToCourse',['$event']]]]]}}" class="action-btn primary" bindtap="__e"><image src="/static/images/navigation.png" mode="aspectFit"></image><text>一键导航</text></button><button data-event-opts="{{[['tap',[['downloadMaterials',['$event']]]]]}}" class="action-btn secondary" bindtap="__e"><image src="/static/images/download.png" mode="aspectFit"></image><text>课件下载</text></button><button data-event-opts="{{[['tap',[['setReminder',['$event']]]]]}}" class="action-btn secondary" bindtap="__e"><image src="/static/images/reminder.png" mode="aspectFit"></image><text>上课提醒</text></button></view></view></view></view></block><block wx:if="{{showCalendar}}"><uni-calendar vue-id="74d7b6f4-1" insert="{{false}}" lunar="{{true}}" start-date="2023-01-01" end-date="2023-12-31" data-event-opts="{{[['^confirm',[['onDateConfirm']]]]}}" bind:confirm="__e" bind:__l="__l"></uni-calendar></block></view>
<view class="personal-page"><view class="user-card"><view class="user-info"><image class="user-avatar" src="{{userInfo.avatar}}" mode="aspectFill"></image><view class="user-details"><text class="user-name">{{userInfo.name}}</text><text class="user-id">{{"学号："+userInfo.studentId}}</text><text class="user-college">{{userInfo.college}}</text></view></view><view class="user-status"><text class="status-text">{{userInfo.status}}</text><image class="qrcode-icon" src="/static/images/qrcode.png" mode="aspectFit" data-event-opts="{{[['tap',[['showMyCode',['$event']]]]]}}" bindtap="__e"></image></view></view><view class="account-panel"><view class="panel-header"><text class="panel-title">账户信息</text></view><view class="account-items"><view data-event-opts="{{[['tap',[['navigateTo',['wallet']]]]]}}" class="account-item" bindtap="__e"><view class="item-icon wallet"><image src="/static/images/wallet.png" mode="aspectFit"></image></view><view class="item-content"><text class="item-label">校园钱包</text><text class="item-value">{{"余额：¥ "+wallet.balance}}</text></view><view class="item-arrow"><image src="/static/images/arrow-right.png" mode="aspectFit"></image></view></view><view data-event-opts="{{[['tap',[['navigateTo',['credits']]]]]}}" class="account-item" bindtap="__e"><view class="item-icon credits"><image src="/static/images/credits.png" mode="aspectFit"></image></view><view class="item-content"><text class="item-label">学分情况</text><text class="item-value">{{"已修："+credits.earned+" / 总学分："+credits.total}}</text></view><view class="item-arrow"><image src="/static/images/arrow-right.png" mode="aspectFit"></image></view></view><view data-event-opts="{{[['tap',[['navigateTo',['awards']]]]]}}" class="account-item" bindtap="__e"><view class="item-icon awards"><image src="/static/images/awards.png" mode="aspectFit"></image></view><view class="item-content"><text class="item-label">奖惩记录</text><text class="item-value">{{awards.count+"条记录"}}</text></view><view class="item-arrow"><image src="/static/images/arrow-right.png" mode="aspectFit"></image></view></view><view data-event-opts="{{[['tap',[['navigateTo',['certificates']]]]]}}" class="account-item" bindtap="__e"><view class="item-icon certificates"><image src="/static/images/certificates.png" mode="aspectFit"></image></view><view class="item-content"><text class="item-label">证书成绩</text><text class="item-value">{{certificates.count+"个证书"}}</text></view><view class="item-arrow"><image src="/static/images/arrow-right.png" mode="aspectFit"></image></view></view></view></view><view class="notification-panel"><view class="panel-header"><text class="panel-title">通知中心</text><view data-event-opts="{{[['tap',[['viewAllNotifications',['$event']]]]]}}" class="panel-more" bindtap="__e"><text>查看全部</text><image src="/static/images/arrow-right.png" mode="aspectFit"></image></view></view><view class="notification-list"><block wx:for="{{notifications}}" wx:for-item="notification" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['readNotification',['$0'],[[['notifications','',index]]]]]]]}}" class="notification-card" bindtap="__e"><view class="{{['notification-icon',notification.typeCls]}}"><image src="{{notification.icon}}" mode="aspectFit"></image></view><view class="notification-content"><view class="notification-header"><text class="notification-title">{{notification.title}}</text><text class="notification-time">{{notification.time}}</text></view><text class="notification-desc">{{notification.content}}</text></view><block wx:if="{{!notification.read}}"><view class="notification-status"></view></block></view></block></view></view><view class="system-panel"><view class="panel-header"><text class="panel-title">系统功能</text></view><view class="system-items"><view data-event-opts="{{[['tap',[['navigateTo',['feedback']]]]]}}" class="system-item" bindtap="__e"><view class="item-icon feedback"><image src="/static/images/feedback.png" mode="aspectFit"></image></view><text class="item-label">意见反馈</text></view><view data-event-opts="{{[['tap',[['navigateTo',['settings']]]]]}}" class="system-item" bindtap="__e"><view class="item-icon settings"><image src="/static/images/settings.png" mode="aspectFit"></image></view><text class="item-label">系统设置</text></view><view data-event-opts="{{[['tap',[['navigateTo',['privacy']]]]]}}" class="system-item" bindtap="__e"><view class="item-icon privacy"><image src="/static/images/privacy.png" mode="aspectFit"></image></view><text class="item-label">隐私政策</text></view><view data-event-opts="{{[['tap',[['navigateTo',['about']]]]]}}" class="system-item" bindtap="__e"><view class="item-icon about"><image src="/static/images/about.png" mode="aspectFit"></image></view><text class="item-label">关于我们</text></view></view></view><block wx:if="{{showQRCode}}"><view class="qrcode-popup"><view data-event-opts="{{[['tap',[['hideMyCode',['$event']]]]]}}" class="popup-mask" bindtap="__e"></view><view class="popup-content"><view class="popup-header"><text class="popup-title">我的校园码</text><view data-event-opts="{{[['tap',[['hideMyCode',['$event']]]]]}}" class="popup-close" bindtap="__e"><image src="/static/images/close.png" mode="aspectFit"></image></view></view><view class="popup-body"><view class="qrcode-container"><image class="qrcode-image" src="/static/images/personal-qrcode.png" mode="aspectFit"></image></view><view class="qrcode-info"><text class="qrcode-name">{{userInfo.name}}</text><text class="qrcode-id">{{userInfo.studentId}}</text><text class="qrcode-tips">凭此码可在校内进行身份识别</text></view><view class="action-buttons"><button data-event-opts="{{[['tap',[['refreshCode',['$event']]]]]}}" class="action-btn primary" bindtap="__e"><image src="/static/images/refresh.png" mode="aspectFit"></image><text>刷新校园码</text></button><button data-event-opts="{{[['tap',[['saveCodeImage',['$event']]]]]}}" class="action-btn secondary" bindtap="__e"><image src="/static/images/save.png" mode="aspectFit"></image><text>保存到相册</text></button></view></view></view></view></block></view>
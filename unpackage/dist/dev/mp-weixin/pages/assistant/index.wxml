<view class="assistant-page"><view class="quick-access-menu"><scroll-view class="menu-scroll" scroll-x="true"><block wx:for="{{quickAccessItems}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['handleQuickAccess',['$0'],[[['quickAccessItems','',index]]]]]]]}}" class="menu-item" bindtap="__e"><view class="menu-icon"><image src="{{item.icon}}" mode="aspectFit"></image></view><text class="menu-text">{{item.text}}</text></view></block></scroll-view></view><scroll-view class="chat-container" scroll-y="true" scroll-top="{{scrollTop}}" scroll-with-animation="{{true}}" data-event-opts="{{[['scrolltoupper',[['loadMoreMessages',['$event']]]]]}}" bindscrolltoupper="__e"><view class="chat-list"><block wx:for="{{chatMessages}}" wx:for-item="msg" wx:for-index="index" wx:key="index"><view class="{{['chat-item',(msg.type==='user')?'user-message':'',(msg.type==='system')?'system-message':'']}}"><view class="avatar"><image src="{{msg.type==='user'?userAvatar:botAvatar}}" mode="aspectFill"></image></view><view class="message-bubble"><text>{{msg.content}}</text></view></view></block></view></scroll-view><block wx:if="{{$root.g0>0}}"><view class="task-panel"><text class="panel-title">进行中的任务</text><scroll-view class="task-scroll" scroll-x="true"><block wx:for="{{ongoingTasks}}" wx:for-item="task" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['viewTaskDetail',['$0'],[[['ongoingTasks','',index]]]]]]]}}" class="task-card" bindtap="__e"><view class="task-icon"><image src="{{task.icon}}" mode="aspectFit"></image></view><view class="task-info"><text class="task-title">{{task.title}}</text><text class="task-desc">{{task.description}}</text><view class="progress-bar"><view class="progress-fill" style="{{'width:'+(task.progress+'%')+';'}}"></view></view><text class="task-time">{{"剩余时间: "+task.remainingTime}}</text></view><view class="{{['task-status',task.status]}}"><text>{{task.statusText}}</text></view></view></block></scroll-view></view></block><view class="input-area"><view data-event-opts="{{[['tap',[['startVoiceInput',['$event']]]]]}}" class="mic-btn" bindtap="__e"><image src="/static/images/mic.png" mode="aspectFit"></image></view><input class="text-input" type="text" placeholder="请输入消息..." data-event-opts="{{[['confirm',[['sendMessage',['$event']]]],['input',[['__set_model',['','inputMessage','$event',[]]]]]]}}" value="{{inputMessage}}" bindconfirm="__e" bindinput="__e"/><view data-event-opts="{{[['tap',[['showAttachMenu',['$event']]]]]}}" class="attach-btn" bindtap="__e"><image src="/static/images/attach.png" mode="aspectFit"></image></view><view data-event-opts="{{[['tap',[['sendMessage',['$event']]]]]}}" class="send-btn" bindtap="__e"><image src="/static/images/send.png" mode="aspectFit"></image></view></view></view>
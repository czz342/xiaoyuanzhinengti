<view class="assistant-page data-v-411d5278"><scroll-view class="chat-container data-v-411d5278" scroll-y="true" scroll-top="{{scrollTop}}" scroll-with-animation="{{true}}" data-event-opts="{{[['scrolltoupper',[['loadMoreMessages',['$event']]]]]}}" bindscrolltoupper="__e"><view class="chat-list data-v-411d5278"><block wx:for="{{chatMessages}}" wx:for-item="msg" wx:for-index="index" wx:key="index"><view class="{{['chat-item','data-v-411d5278',(msg.type==='user')?'user-message':'',(msg.type==='system')?'system-message':'']}}"><view class="avatar data-v-411d5278"><image src="{{msg.type==='user'?userAvatar:botAvatar}}" mode="aspectFill" class="data-v-411d5278"></image></view><view class="message-bubble data-v-411d5278"><text class="data-v-411d5278">{{msg.content}}</text></view></view></block></view></scroll-view><block wx:if="{{$root.g0>0}}"><view class="task-panel data-v-411d5278"><text class="panel-title data-v-411d5278">进行中的任务</text><scroll-view class="task-scroll data-v-411d5278" scroll-x="true"><block wx:for="{{ongoingTasks}}" wx:for-item="task" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['viewTaskDetail',['$0'],[[['ongoingTasks','',index]]]]]]]}}" class="task-card data-v-411d5278" bindtap="__e"><view class="task-icon data-v-411d5278"><image src="{{task.icon}}" mode="aspectFit" class="data-v-411d5278"></image></view><view class="task-info data-v-411d5278"><text class="task-title data-v-411d5278">{{task.title}}</text><text class="task-desc data-v-411d5278">{{task.description}}</text><view class="progress-bar data-v-411d5278"><view class="progress-fill data-v-411d5278" style="{{'width:'+(task.progress+'%')+';'}}"></view></view><text class="task-time data-v-411d5278">{{"剩余时间: "+task.remainingTime}}</text></view><view class="{{['task-status','data-v-411d5278',task.status]}}"><text class="data-v-411d5278">{{task.statusText}}</text></view></view></block></scroll-view></view></block><view class="quick-access-menu data-v-411d5278"><scroll-view class="menu-scroll data-v-411d5278" scroll-x="true"><block wx:for="{{quickAccessItems}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['handleQuickAccess',['$0'],[[['quickAccessItems','',index]]]]]]]}}" class="menu-item data-v-411d5278" bindtap="__e"><view class="menu-icon data-v-411d5278"><image src="{{item.icon}}" mode="aspectFit" class="data-v-411d5278"></image></view><text class="menu-text data-v-411d5278">{{item.text}}</text></view></block></scroll-view></view><view class="input-area data-v-411d5278"><view data-event-opts="{{[['tap',[['startVoiceInput',['$event']]]]]}}" class="mic-btn data-v-411d5278" bindtap="__e"><image src="/static/images/scan.png" mode="aspectFit" class="data-v-411d5278"></image></view><input class="text-input data-v-411d5278" type="text" placeholder="请输入消息..." data-event-opts="{{[['confirm',[['sendMessage',['$event']]]],['input',[['__set_model',['','inputMessage','$event',[]]]]]]}}" value="{{inputMessage}}" bindconfirm="__e" bindinput="__e"/><view data-event-opts="{{[['tap',[['showAttachMenu',['$event']]]]]}}" class="attach-btn data-v-411d5278" bindtap="__e"><image src="/static/images/filter.png" mode="aspectFit" class="data-v-411d5278"></image></view><view data-event-opts="{{[['tap',[['sendMessage',['$event']]]]]}}" class="send-btn data-v-411d5278" bindtap="__e"><image src="/static/images/arrow-right.png" mode="aspectFit" class="data-v-411d5278"></image></view></view></view>